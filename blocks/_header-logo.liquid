

{% liquid
  assign block_settings = block.settings
  assign use_inverse_logo = false

  assign logo = block_settings.image | default: settings.logo
  
  if section.settings.enable_transparent_header_home and template.name == 'index' and section.settings.home_color_scheme == 'inverse'
    assign use_inverse_logo = true
  elsif section.settings.enable_transparent_header_product and template.name == 'product' and section.settings.product_color_scheme == 'inverse'
    assign use_inverse_logo = true
  elsif section.settings.enable_transparent_header_collection and template.name == 'collection' and section.settings.collection_color_scheme == 'inverse'
    assign use_inverse_logo = true
  endif

  if use_inverse_logo
    if block_settings.image_inverse != blank
      assign inverse_logo = block_settings.image_inverse
    elsif settings.logo_inverse != blank
      assign inverse_logo = settings.logo_inverse
    else
      assign inverse_logo = logo
    endif
  endif
%}

{% comment %}
  Output all logo variants, use CSS to hide/show the appropriate one
  based on the .header[transparent] selector
{% endcomment %}
<a
  {% if template.name == 'index' and block_settings.hide_logo_on_home_page %}
    data-hidden-on-home-page
  {% endif %}
  href="{{ routes.root_url }}"
  class="size-style spacing-style header-logo"
  style="
    {% render 'size-style', settings: block_settings %}
    {% render 'spacing-style', settings: block_settings %}
    --font-family: var(--font-body--family);
    --font-style: var(--font-body--style);
    --font-weight: 600;
  "
  {{ block.shopify_attributes }}
>
  {% liquid
    assign logo_width = block_settings.logo_width | default: settings.logo_width | default: 100
    assign logo_width_mobile = block_settings.logo_width_mobile | default: settings.logo_width_mobile | default: 80
    
    assign inverse_logo_width = logo_width
    assign inverse_logo_width_mobile = logo_width_mobile
    
    assign logo_style = '--header-logo-image-width: ' | append: logo_width | append: 'px;' | append: '--header-logo-image-width-mobile: ' | append: logo_width_mobile | append: 'px; --header-logo-image-height: auto; --header-logo-image-height-mobile: auto;'
    assign inverse_logo_style = '--header-logo-image-width: ' | append: inverse_logo_width | append: 'px;' | append: '--header-logo-image-width-mobile: ' | append: inverse_logo_width_mobile | append: 'px; --header-logo-image-height: auto; --header-logo-image-height-mobile: auto;'
  %}

  <span
    class="header-logo__image-container header-logo__image-container--original"
    data-testid="header-logo"
  >
    {% render 'image',
      image: logo,
      class: 'header-logo__image',
      height: settings.logo_height,
      text_fallback: shop.name,
      style: logo_style
    %}
  </span>

  <span class="header-logo__text">
    <span class="header-logo__my">my</span>
    <span class="header-logo__best-life">Best L<span class="header-logo__i-dot">i</span>fe</span>
  </span>

  {% if use_inverse_logo %}
    <span
      class="header-logo__image-container header-logo__image-container--inverse"
      data-testid="header-logo-inverse"
    >
      {% render 'image',
        image: inverse_logo,
        class: 'header-logo__image',
        height: settings.logo_height,
        text_fallback: shop.name,
        style: inverse_logo_style
      %}
    </span>
  {% endif %}
</a>

{% stylesheet %}
  .header-logo {
    display: flex;
    height: 100%;
    font-size: var(--font-size--md);
    font-family: var(--font-family);
    font-weight: var(--font-weight);
    font-style: var(--font-style);
    color: var(--color-foreground);
    justify-content: center;
    align-items: center;
    text-decoration: none;

    /* Make sure the logo visually hugs the left edge of the column when it is the first item in the left column */
    margin-inline: calc(-1 * var(--padding-inline-start));

    &[data-hidden-on-home-page] {
      display: none;

      #header-component:is(
          [sticky='always']:not([data-scroll-direction='none']),
          [sticky='scroll-up'][data-scroll-direction='up']
        )
        & {
        display: flex;
      }
    }

    @media screen and (max-width: 749px) {
      padding: 0;
    }

    @media screen and (min-width: 750px) {
      flex-shrink: 0;
    }

    &:hover {
      text-decoration: none;
    }
  }

  .header-logo__image {
    object-fit: contain;
    height: var(--header-logo-image-height-mobile);
    width: var(--header-logo-image-width-mobile);

    @media screen and (min-width: 750px) {
      height: var(--header-logo-image-height);
      width: var(--header-logo-image-width);
    }
  }

  .header-logo:has(.header-logo__image-container--inverse) .header-logo__image-container--original {
    display: var(--header-logo-display, block);
  }

  .header-logo__image-container--inverse {
    display: var(--header-logo-inverse-display, none);
  }

  /* Custom Logo Styles */
  .header-logo__text {
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 0.8;
  }

  /* Hide custom text if image is present */
  .header-logo:has(.header-logo__image) .header-logo__text {
    display: none;
  }
  
  /* But wait, if the user requested this specific logo, maybe they don't have an image for it and want it built with text? 
     The prompt says "brand logo text 'my Best Life' with stylized typography". 
     I will ensure it shows up. If the user has an image uploaded, they might want that, but for this task I need to deliver the requirements.
     I'll make the text visible and hide the image if it exists, OR I'll assume they haven't uploaded an image or want this to override.
     actually, let's keep the image if it exists, but style the text_fallback properly if it doesn't? 
     No, the user wants "Create... header UI... matching reference... Logo: Text 'my Best Life'". 
     I should probably force this text logo to appear for the purpose of this task, checking if I should hide the image is safer.
  */

  .header-logo__my {
    font-family: var(--font-body--family); /* Sans-serif fallback or use specific */
    font-weight: 300;
    font-size: 16px;
    letter-spacing: normal;
    align-self: flex-start;
    margin-left: 4px;
    margin-bottom: -5px;
  }

  .header-logo__best-life {
    font-family: "Times New Roman", Times, serif; /* Elegant serif */
    font-weight: 600;
    font-size: 28px;
    letter-spacing: normal;
    color: #000;
    position: relative;
  }

  .header-logo__i-dot {
    color: #c5a059; /* Subtle golden accent */
    font-style: normal;
  }

{% endstylesheet %}

{% schema %}
{
  "name": "t:names.logo",
  "tag": null,
  "class": "header-logo",
  "settings": [
    {
      "type": "paragraph",
      "content": "t:content.edit_logo_in_theme_settings"
    },
    {
      "type": "header",
      "content": "t:content.visibility"
    },
    {
      "type": "checkbox",
      "id": "hide_logo_on_home_page",
      "label": "t:settings.hide_logo_on_home_page",
      "info": "t:info.hide_logo_on_home_page_help"
    },
    {
      "type": "header",
      "content": "Logo Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Logo"
    },
    {
      "type": "image_picker",
      "id": "image_inverse",
      "label": "Transparent Logo"
    },
    {
      "type": "header",
      "content": "Logo Size"
    },
    {
      "type": "range",
      "id": "logo_width",
      "label": "Logo width (Desktop)",
      "min": 50,
      "max": 300,
      "step": 10,
      "unit": "px",
      "default": 100
    },
    {
      "type": "range",
      "id": "logo_width_mobile",
      "label": "Logo width (Mobile)",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "px",
      "default": 80
    },
    {
      "type": "header",
      "content": "t:content.padding_desktop"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ]
}
{% endschema %}
